!function(){for(var e,t=function(){},a=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],r=a.length,n=window.console=window.console||{};r--;)e=a[r],n[e]||(n[e]=t)}();var newGuid=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:3&a|8).toString(16)});return t},createErrorDetailLink=function(e){return e.ErrorId?'<a href="/errorlog/'+e.ErrorId+'">Error Details</a>':"&nbsp;"},addHistoryTableEntry=function(e,t){var a=20,r="";$("#includeAnimations").is(":checked")&&(r='class="slowIn" style="display:none;"'),$("#breaker .statusHistory tbody").prepend("<tr "+r+' data-eventid="'+t.EventId+'"><td>'+t.Status+"</td><td>"+moment(t.On).format("MM-DD HH:mm:ss A")+"</td><td>"+createErrorDetailLink(t)+"</td></tr>"),$("#includeAnimations").is(":checked")&&$("#breaker .statusHistory tbody .slowIn").show(800).removeClass("slowIn"),$("#breaker .statusHistory tbody tr:gt("+(a-1)+")").hide(),$('#breaker .statusHistory tbody [data-eventid="'+t.EventId+'"]').hover(function(){e.PublishSite({Name:"HighlightChangedItem",EventId:t.EventId})},function(){e.PublishSite({Name:"UnHighlightChangedItem",EventId:t.EventId})})},addHistoryChartItem=function(e,t){$("#breaker .chart .chartItems").append('<div class="chart'+t.Status+'" data-eventid="'+t.EventId+'"></div>');var a=$("#breaker .chart .chartItems div").length;a>=20&&$("#breaker .chart .chartItems div").slice(0,a-20).hide(),$('#breaker .chart .chartItems [data-eventid="'+t.EventId+'"]').hover(function(){e.PublishSite({Name:"HighlightChangedItem",EventId:t.EventId})},function(){e.PublishSite({Name:"UnHighlightChangedItem",EventId:t.EventId})})},playBreakerOpenSoundEffect=function(){if($("#includeSound").is(":checked")){var e=new Audio;e.src="media/Computer Error-SoundBible.com-399240903.mp3",e.play()}},setBreakerStatus=function(e){$("#breaker .breakerStatus").html(e.Status),$("#breaker .breakerStatus").removeClass("breakerStatusOpen").removeClass("breakerStatusClosed").removeClass("breakerStatusHalfOpen"),$("#breaker .breakerStatus").toggleClass("breakerStatus"+e.Status)},setBreakerVisualIndicator=function(e){$("#breaker .visualIndicator .breakerBar").removeClass("Open").removeClass("Closed").removeClass("HalfOpen").removeClass("breakerOpenAlarm").removeClass("breakerHalfOpenAlarm"),$("#breaker .visualIndicator .breakerBar").toggleClass(e.Status),"Closed"!==e.Status&&$("#includeAnimations").is(":checked")&&$("#breaker .visualIndicator .breakerBar").addClass("breaker"+e.Status+"Alarm")},globalPathway=subtopic();Cell(["IntervalCreated"],[{Name:"IntervalCreated",IntervalLength:0}],function(e,t){setTimeout(function(){e.PublishSite({Name:"IntervalCreated",IntervalLength:t.IntervalLength})},t.IntervalLength)},globalPathway),Cell(["IntervalCreated"],[{Name:"BreakerStatusChanged",Status:"",On:new Date}],function(e){var t=["Closed","Open","HalfOpen"],a=Math.floor(Math.random()*t.length+1),r=t[a-1],n=Math.floor(1e3*Math.random()+1);"Closed"===r&&(n=""),e.PublishSite({Name:"BreakerStatusChanged",BreakerName:"Payment service",EventId:newGuid(),Status:r,ErrorId:n,On:new Date})},globalPathway),Cell(["BreakerStatusInitialized"],[],function(e,t){$("#breaker").length||$("#container").html('<div id="breaker" class="breakerWrapper"><div class="breakerHeader"><span class="breakerName"></span> is <span class="breakerStatus"></span></div><div class="breakerDisplay"><div class="leftSide"></div><div class="visualIndicator"><div class="breakerBar open"></div></div><div class="rightSide"></div><br clear="both"/></div><div class="history"><div class="chart"><div class="chartItems"></div><br clear="both"/></div><table class="statusHistory" cellpadding="0" cellspacing="0"><thead><tr><th>Status</th><th>On</th><th>Details</th></tr></thead><tbody></tbody></table></div></div>'),$("#breaker .breakerName").html(t.BreakerName),setBreakerStatus(t),$("#breaker .leftSide").html(t.LeftComponentName),$("#breaker .rightSide").html(t.RightComponentName),addHistoryTableEntry(e,t),addHistoryChartItem(e,t)},globalPathway),Cell(["BreakerStatusChanged"],[],function(e,t){setBreakerStatus(t)},globalPathway),Cell(["BreakerStatusChanged"],[],function(e,t){"Open"===t.Status&&playBreakerOpenSoundEffect()},globalPathway),Cell(["BreakerStatusChanged"],[],function(e,t){setBreakerVisualIndicator(t)},globalPathway),Cell(["BreakerStatusChanged"],[{Name:"HighlightChangedItem",EventId:""},{Name:"UnHighlightChangedItem",EventId:""}],function(e,t){addHistoryChartItem(e,t)},globalPathway),Cell(["BreakerStatusChanged"],[{Name:"HighlightChangedItem",EventId:""},{Name:"UnHighlightChangedItem",EventId:""}],function(e,t){addHistoryTableEntry(e,t)},globalPathway),Cell(["HighlightChangedItem","UnHighlightChangedItem"],[],function(e,t){isMessage(t,"HighlightChangedItem")?$("#includeAnimations").is(":checked")?($('#breaker .chart .chartItems [data-eventid="'+t.EventId+'"]').addClass("highlightChartItem"),$('#breaker .statusHistory tbody [data-eventid="'+t.EventId+'"] > td').addClass("animateHighlightTableItem")):($('#breaker .chart .chartItems [data-eventid="'+t.EventId+'"]').addClass("highlightChartItem"),$('#breaker .statusHistory tbody [data-eventid="'+t.EventId+'"] > td').addClass("highlightTableItem")):isMessage(t,"UnHighlightChangedItem")&&($("#includeAnimations").is(":checked")?($('#breaker .chart .chartItems [data-eventid="'+t.EventId+'"]').removeClass("highlightChartItem"),$('#breaker .statusHistory tbody [data-eventid="'+t.EventId+'"] > td').removeClass("animateHighlightTableItem")):($('#breaker .chart .chartItems [data-eventid="'+t.EventId+'"]').removeClass("highlightChartItem"),$('#breaker .statusHistory tbody [data-eventid="'+t.EventId+'"] > td').removeClass("highlightTableItem")))},globalPathway);var simulate=function(){globalPathway.publish("BreakerStatusInitialized",[{Name:"BreakerStatusInitialized",EventId:newGuid(),BreakerName:"Payment service",Status:"Closed",ErrorId:"",On:new Date,LeftComponentName:"PaymentGateway",RightComponentName:"Paypal"}]),globalPathway.publish("IntervalCreated",[{Name:"IntervalCreated",IntervalLength:2e3}])};